<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitness Tracker App</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background: #f4f6f8;
            color: #333;
        }
        header {
            background: #28a745;
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 1.5em;
        }
        .container {
            max-width: 900px;
            margin: auto;
            padding: 20px;
        }
        .card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        .card h3 {
            margin: 0 0 10px;
        }
        input, select, button {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        button {
            background: #28a745;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background: #218838;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid #ddd;
            padding: 8px;
        }
        th {
            background: #28a745;
            color: white;
        }
        .delete-btn {
            background: red;
            color: white;
            padding: 5px 8px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .delete-btn:hover {
            background: darkred;
        }
    </style>
</head>
<body>

<header>üèãÔ∏è Fitness Tracker App</header>
<div class="container">

    <!-- Dashboard -->
    <div class="card">
        <h3>Today's Summary</h3>
        <p>Steps: <span id="stepsToday">0</span></p>
        <p>Calories Burned: <span id="caloriesToday">0</span></p>
        <p>Workout Time: <span id="timeToday">0</span> mins</p>
    </div>

    <!-- Weekly Graph -->
    <div class="card">
        <h3>Weekly Progress (Calories Burned)</h3>
        <canvas id="weeklyChart"></canvas>
    </div>

    <!-- Activity Type Pie Chart -->
    <div class="card">
        <h3>Activity Type Distribution</h3>
        <canvas id="typeChart"></canvas>
    </div>

    <!-- Add Activity -->
    <div class="card">
        <h3>Add Activity</h3>
        <input type="date" id="date">
        <select id="type">
            <option value="Running">Running</option>
            <option value="Walking">Walking</option>
            <option value="Cycling">Cycling</option>
            <option value="Gym">Gym</option>
        </select>
        <input type="number" id="steps" placeholder="Steps">
        <input type="number" id="calories" placeholder="Calories Burned">
        <input type="number" id="time" placeholder="Workout Time (minutes)">
        <button onclick="addActivity()">Save Activity</button>
    </div>

    <!-- History -->
    <div class="card">
        <h3>Activity History</h3>
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Type</th>
                    <th>Steps</th>
                    <th>Calories</th>
                    <th>Time (min)</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="history"></tbody>
        </table>
    </div>

</div>

<script>
    let activities = JSON.parse(localStorage.getItem("activities")) || [];
    let barChart, pieChart;

    function addActivity() {
        const date = document.getElementById("date").value;
        const type = document.getElementById("type").value;
        const steps = parseInt(document.getElementById("steps").value) || 0;
        const calories = parseInt(document.getElementById("calories").value) || 0;
        const time = parseInt(document.getElementById("time").value) || 0;

        if (!date) {
            alert("Please select a date");
            return;
        }

        const activity = { date, type, steps, calories, time };
        activities.push(activity);
        localStorage.setItem("activities", JSON.stringify(activities));

        document.getElementById("date").value = "";
        document.getElementById("steps").value = "";
        document.getElementById("calories").value = "";
        document.getElementById("time").value = "";

        loadActivities();
        updateDashboard();
        updateCharts();
    }

    function loadActivities() {
        const history = document.getElementById("history");
        history.innerHTML = "";
        activities.forEach((act, index) => {
            history.innerHTML += `
                <tr>
                    <td>${act.date}</td>
                    <td>${act.type}</td>
                    <td>${act.steps}</td>
                    <td>${act.calories}</td>
                    <td>${act.time}</td>
                    <td><button class="delete-btn" onclick="deleteActivity(${index})">Delete</button></td>
                </tr>
            `;
        });
    }

    function deleteActivity(index) {
        if (confirm("Are you sure you want to delete this activity?")) {
            activities.splice(index, 1);
            localStorage.setItem("activities", JSON.stringify(activities));
            loadActivities();
            updateDashboard();
            updateCharts();
        }
    }

    function updateDashboard() {
        let today = new Date().toISOString().split("T")[0];
        let todaySteps = 0, todayCalories = 0, todayTime = 0;

        activities.forEach(act => {
            if (act.date === today) {
                todaySteps += act.steps;
                todayCalories += act.calories;
                todayTime += act.time;
            }
        });

        document.getElementById("stepsToday").innerText = todaySteps;
        document.getElementById("caloriesToday").innerText = todayCalories;
        document.getElementById("timeToday").innerText = todayTime;
    }

    function updateCharts() {
        let weekData = {};
        let typeData = {};
        let today = new Date();

        // Prepare last 7 days data
        for (let i = 6; i >= 0; i--) {
            let d = new Date(today);
            d.setDate(today.getDate() - i);
            let dateStr = d.toISOString().split("T")[0];
            weekData[dateStr] = 0;
        }

        // Prepare type counts
        ["Running", "Walking", "Cycling", "Gym"].forEach(type => typeData[type] = 0);

        activities.forEach(act => {
            if (weekData.hasOwnProperty(act.date)) {
                weekData[act.date] += act.calories;
            }
            if (typeData.hasOwnProperty(act.type)) {
                typeData[act.type] += 1;
            }
        });

        let labels = Object.keys(weekData);
        let data = Object.values(weekData);

        const weeklyChartElem = document.getElementById("weeklyChart");
        const typeChartElem = document.getElementById("typeChart");

        if (barChart) barChart.destroy();
        if (weeklyChartElem) {
            barChart = new Chart(weeklyChartElem, {
                type: "bar",
                data: {
                    labels: labels,
                    datasets: [{
                        label: "Calories Burned",
                        data: data,
                        backgroundColor: "#28a745"
                    }]
                },
                options: { responsive: true, plugins: { legend: { display: false } } }
            });
        }

        if (pieChart) pieChart.destroy();
        if (typeChartElem) {
            pieChart = new Chart(typeChartElem, {
                type: "pie",
                data: {
                    labels: Object.keys(typeData),
                    datasets: [{
                        data: Object.values(typeData),
                        backgroundColor: ["#ff6384", "#36a2eb", "#ffce56", "#4bc0c0"]
                    }]
                }
            });
        }
    }

    loadActivities();
    updateDashboard();
    updateCharts();
</script>

</body>
</html>
